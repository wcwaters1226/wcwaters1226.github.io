<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Caesar Cipher</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
 
<h1>Caesar Cipher</h1>
	
<div id="wrapper">
   <div id="header">
      <h1>Caesar Cipher</h1>
     
    
   </div>
   <div id="content">
      <div class='plaintext'>
         <h3>Plaintext</h3>
         <p>- The plain msg -</p>
         <textarea id='plaintext' rows="4" cols="50">

         </textarea>
         <br>
         <h3>Enter a shift value: </h3>
         <div>
            <input class="shift-l" type="number" min="0" max="25" step="1" value ="3"/>
            <button class='btn-encrypt'>Encrypt</button>
         </div>
      </div>
      <div class='cipher'>
         <h3>Ciphertext</h3>
         <p>- The encrypted msg -</p>
         <textarea id='ciphertext' rows="4" cols="50">
         </textarea>
         <br>
         <h3>Enter a shift value: </h3>
         <div>
            <input class="shift-r" type="number" min="0" max="25" step="1" value ="3"/>
            <button class='btn-decrypt'>Decrypt</button>
         </div>
      </div>
   </div>
	
	<script>
	# Alphabet
charsUP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
charsDN = 'abcdefghijklmnopqrstuvwxyz'

###
# Encrypts the string using the
# famous Caesar shift
###
String::caesarShift = (shift) ->
  result = ''
  i = 0
  while i < @length
    c = @charCodeAt i
    if c >= 65 and c <= 90
      result += charsUP[(c-65+shift)%%26]
    else if c >= 97 and c <= 122
      result += charsDN[(c-97+shift)%%26]
    else
      result += @charAt i
    i++
  result

# Click event handler for encrypt btn
$('.btn-encrypt').click ->
  shift = $('.shift-l').val() %% 26
  text = $('#plaintext').val()
  cipher = text.caesarShift shift
  # shift the plaintext
  $('#ciphertext').val cipher
  return

# Click event handler for decrypt btn
$('.btn-decrypt').click ->
  shift = $('.shift-r').val() %% 26
  text = $('#ciphertext').val()
  plaintext = text.caesarShift -shift
  # shift the plaintext
  $('#plaintext').val plaintext
  return
	</script>

